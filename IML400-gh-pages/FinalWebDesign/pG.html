<!DOCTYPE html>
<script src="threex.terrain-master/examples/vendor/three.js/build/three-min.js"></script>
<script src="threex.terrain-master/examples/vendor/three.js/examples/js/SimplexNoise.js"></script>
<script src="threex.terrain-master/threex.terrain.js"></script>
<script src="Js/js/postprocessing/EffectComposer.js"></script>
<script src="Js/js/postprocessing/FilmPass.js"></script>
<script src="Js/js/shaders/CopyShader.js"></script>
<script src="Js/js/postprocessing/RenderPass.js"></script>
<script src="Js/js/postprocessing/ShaderPass.js"></script>
<script src="Js/js/postprocessing/MaskPass.js"></script>
<script src="Js/js/shaders/VignetteShader.js"></script>
<script src="Js/js/controls/FirstPersonControls.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>


<body style='margin: 0px; background-color: #c3d3db; overflow: hidden;'>
    
 
    <script>
	
    var inspect;
    
    var mouseX = 0, mouseY = 0;

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;
    
    var renderer	= new THREE.WebGLRenderer({
		antialias	: true
	});
    
    var clock = new THREE.Clock();

//    var lMove = lMove++;
    var myVerts = [-4,-4,-0,-3,-4,-0,-2,-4,-0,-1,-4,-0,0,-4,-0,1,-4,-0,2,-4,-0,3,-4,-0,4,-4,-0,-4,-3,-0,-3,-3,-0,-2,-3,-0,-1,-3,-0,0,-3,-0,1,-3,-0,2,-3,-0,3,-3,-0,4,-3,-0,-4,-2,-0,-3,-2,-0,-2,-2,2.84149,-1,-2,2.84149,0,-2,2.84149,1,-2,2.84149,2,-2,2.84149,3,-2,-0,4,-2,-0,-4,-1,-0,-3,-1,-0,-2,-1,2.84149,-1,-1,2.84149,0,-1,2.84149,1,-1,2.84149,2,-1,2.84149,3,-1,-0,4,-1,-0,-4,0,0,-3,0,0,-2,0,2.84149,-1,0,2.84149,0,0,5.47243,1,0,5.47243,2,0,2.84149,3,0,0,4,0,0,-4,1,0,-3,1,0,-2,1,2.84149,-1,1,2.84149,0,1,5.47243,1,1,5.47243,2,1,2.84149,3,1,0,4,1,0,-4,2,0,-3,2,0,-2,2,0,-1,2,2.84149,0,2,2.84149,1,2,2.84149,2,2,2.84149,3,2,0,4,2,0,-4,3,0,-3,3,0,-2,3,0,-1,3,2.84149,0,3,2.84149,1,3,2.84149,2,3,2.84149,3,3,0,4,3,0,-4,4,0,-3,4,0,-2,4,0,-1,4,0,0,4,0,1,4,0,2,4,0,3,4,0,4,4,0];
    
	renderer.setSize( window.innerWidth, window.innerHeight );
	document.body.appendChild( renderer.domElement );
	var onRenderFcts= [];
	var scene	= new THREE.Scene();
	var camera	= new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.01, 1000);
    camera.position.z = 10; 
     
//    camera.position.x = 0; 
//    camera.position.y = 5; 
//    var pX;
//    var a = new THREE.Vector3( pX, 3, 0 );
//    camera.lookAt(a);
    
//    var camera = new THREE.PerspectiveCamera(
//                35,             // Field of view
//                800 / 600,      // Aspect ratio
//                0.1,            // Near plane
//                10000           // Far plane
//            );
//            camera.position.set( 0, 5, 5 );
//            camera.lookAt( scene.position );

	controls = new THREE.FirstPersonControls( camera );
				controls.movementSpeed = 10;
				controls.lookSpeed = 0.1;
    
   
   
	//////////////////////////////////////////////////////////////////////////////////
	//		set 3 point lighting						//
	//////////////////////////////////////////////////////////////////////////////////
	;(function(){
		// add a ambient light
//		var light	= new THREE.AmbientLight( 0x202020 )
//		scene.add( light )
        
        var light = new THREE.HemisphereLight( 0xffffbb, 0x080820, .2 );
scene.add( light );
//		// add a light in front
//		var light	= new THREE.DirectionalLight('white', .3)
//		light.position.set(.8, .5, 2)
//		scene.add( light )
		// add a light behind
        
        var light = new THREE.PointLight( 0xffffff, .2, 100, 1.4 );
        light.position.set( 10, 10, -20 );
        scene.add( light );
        
        
        
		var spotLight = new THREE.SpotLight( 0xffffff, 1 );
            spotLight.position.set( 100, 1000, 100 );

            spotLight.castShadow = true;

            scene.add( spotLight );
        
        
	})()
    
   
	//////////////////////////////////////////////////////////////////////////////////
	//		add an object and make it move					//
	//////////////////////////////////////////////////////////////////////////////////	
    
    
//	var heightMap	= THREEx.Terrain.allocateHeightMap(300,150)
	 var heightMap	= THREEx.Terrain.allocateHeightMap(150,150)
//    var heightMap2	= THREEx.Terrain.allocateHeightMap(2000, 2000)
	// var heightMap	= THREEx.Terrain.allocateHeightMap(16,16)
	THREEx.Terrain.simplexHeightMap(heightMap)
	
	var geometry	= THREEx.Terrain.heightMapToPlaneGeometry(heightMap)
	THREEx.Terrain.heightMapToVertexColor(heightMap, geometry)
    
   
	
	var nColor = new THREE.Color(0xfefefe) 
	
	var material	= new THREE.MeshLambertMaterial({
		shading		: THREE.FlatShading,
		vertexColors 	: THREE.VertexColors,
        color:  nColor,
        
	});
    
    var material2	= new THREE.MeshLambertMaterial({
		shading		: THREE.FlatShading,
		vertexColors 	: THREE.FaceColors,
        color:  0x94039d,
        
	});
    //hello, this is going to work!!
    
	var mesh	= new THREE.Mesh( geometry, material );
	scene.add( mesh );
	mesh.lookAt(new THREE.Vector3(0,1,0))
	mesh.scale.y	= 7
	mesh.scale.x	= 7
	mesh.scale.z	= .3
	mesh.scale.multiplyScalar(20) 
    
    
            
        inspect = waterPlane;
       console.log("water...")
       console.log(waterPlane);
	
	var plane = new THREE.PlaneGeometry( 30, 30, 1, 1);
    
    var water = new THREE.PlaneGeometry( 140, 140, 32 );
            var liqC = new THREE.MeshBasicMaterial( {color: 0x82bfde, side:                 THREE.DoubleSide, transparent: true, opacity: 0.8} );
            var waterPlane = new THREE.Mesh( water, liqC );
scene.add( waterPlane );
            waterPlane.rotateX(-55);
            waterPlane.position.setY(-7);
            waterPlane.position.setZ(3);
    
            
        inspect = waterPlane;
       console.log("water...")
       console.log(waterPlane);
    
    //-----------------------------//////////////////////
        
    //JSON LOADER//
    // instantiate a loader


        
    
    
    //////////////////////////////////////////////////////////////////////////////////
	//		second Objects						//
	//////////////////////////////////////////////////////////////////////////////////
//   
//        
    
//       
   document.addEventListener( 'mousemove', onDocumentMouseMove, false ); 
    
    window.addEventListener( 'resize', onWindowResize, false );

			

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

				controls.handleResize();

			}

    
	//////////////////////////////////////////////////////////////////////////////////
	//		render the scene						//
	//////////////////////////////////////////////////////////////////////////////////
	onRenderFcts.push(function(){
        
		renderer.render( scene, camera );		
	})
//    
//     var composer = new THREE.EffectComposer( renderer );
//				composer.addPass( new THREE.RenderPass( scene, camera ) );
//				var effect = new THREE.ShaderPass( THREE.VignetteShader );
//				composer.addPass( effect );
				
    function onDocumentMouseMove(event) {

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

			}
	
//    
    function go() {
      controls.update( clock.getDelta() );
				renderer.render( scene, camera );
    }  
    
	//////////////////////////////////////////////////////////////////////////////////
	//		loop runner							//
	//////////////////////////////////////////////////////////////////////////////////
	var lastTimeMsec= null
	requestAnimationFrame(function animate(nowMsec){
		// keep looping
		requestAnimationFrame( animate );
        go();
		// measure time
		lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
		var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
		lastTimeMsec	= nowMsec
		// call each update function
		onRenderFcts.forEach(function(onRenderFct){
			onRenderFct(deltaMsec/1000, nowMsec/1000)
		})
        
        
	})
    
    
</script>
     
     
     
     </body>